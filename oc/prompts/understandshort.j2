{{ header }}

idxs = list(range(7))

# New.
ctx = get_ctx()
states = []

{% for block in blocks %}
# {{ block.speaker }}: {{ block.text }}{% if block.type != "No op." %}
def turn(state):
    {{ block.type }}
    for config in {{ block.configs }}:
        for {{ block.configdots }} in permutations(config):
            for {{ block.newdots }} in {{ block.newconfigs }}:
                {%- for constraint in block.constraints %}
                {{ constraint.name }} = {{ constraint.code}}
                {%- endfor %}
# Dots: {{ block.dots }}
# Selection: {{ block.select }}{% else %}
def turn(state):
    # No op.
    return [None]{% endif %}
# End.
{% endfor %}

# New.
ctx = get_ctx()
states = []

{% for block in past %}
# {{ block.speaker }}: {{ block.text }}{% if block.noop == false %}
def turn(state):
{{ block.code }}
# Dots: {{ block.dots }}
# Selection: {{ block.select }}{% else %}
def turn(state):
    # No op.
    return [None]{% endif %}
# End.
{% endfor %}
# {{speaker}}: {{ text }}
